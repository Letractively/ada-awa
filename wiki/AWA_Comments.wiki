#summary Comments module

== Introduction ==
The <b>Comments</b> module is a general purpose module that allows to associate user comments
to any database entity.  The module defines several bean types that allow to display a list
of comments or edit and publish a new comment.

== Model ==
The database model is generic and it uses the <tt>Entity_Type</tt> provided by
[http://ada-ado.googlecode.com ADO] to associate a comment to entities stored in different
tables.  The <tt>Entity_Type</tt> identifies the database table and the stored identifier
in <tt>for_entity_id</tt> defines the entity in that table.

[http://ada-awa.googlecode.com/svn/wiki/awa_comments_model.png]

== Integration ==
The <tt>Comment_Module</tt> manages the comments associated with entities.  It provides
operations that are used by the comment beans to manage the comments.
An instance of the <tt>Comment_Module</tt> must be declared and registered in the
AWA application.  The module instance can be defined as follows:

{{{
  type Application is new AWA.Applications.Application with record
     Comment_Module : aliased AWA.Comments.Modules.Comment_Module;
  end record;
}}}

And registered in the `Initialize_Modules` procedure by using:

{{{
  Register (App    => App.Self.all'Access,
            Name   => AWA.Comments.Modules.NAME,
            URI    => "comments",
            Module => App.Comment_Module'Access);
}}}
== Comment Beans ==
Several bean types are provided to represent and manage a list of tags.
The tag module registers the bean constructors when it is initialized.
To use them, one must declare a bean definition in the application XML configuration.

=== Comment_List_Bean ===
The <tt>Comment_List_Bean</tt> holds a list of comments and provides operations used by the
<tt>awa:tagList</tt> component to add or remove tags within a <tt>h:form</tt> component.
A bean can be declared and configured as follows in the XML application configuration file:

{{{
  <managed-bean>
    <managed-bean-name>postCommentList</managed-bean-name>
    <managed-bean-class>AWA.Comments.Beans.Comment_List_Bean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
      <property-name>entity_type</property-name>
      <property-class>String</property-class>
      <value>awa_post</value>
    </managed-property>
    <managed-property>
      <property-name>permission</property-name>
      <property-class>String</property-class>
      <value>blog-comment-post</value>
    </managed-property>
  </managed-bean>
}}}

The <tt>entity_type</tt> property defines the name of the database table to which the comments
are assigned.  The <tt>permission</tt> property defines the permission name that must be used
to verify that the user has the permission do add or remove the comment.



----
[http://code.google.com/p/ada-gen Generated by Dynamo] _from awa-comments.ads_
