<?xml version="1.0" encoding="UTF-8"?>
<hibernate-mapping default-cascade="none">
    <class name="AWA.Workspaces.Models.Workspace" table="workspace"
           dynamic-insert="true" dynamic-update="true">
        <comment>
            The workspace allows to group all together the different
            application entities which belong to a user or a set of collaborating users.
            Other entities, for example a Blog, a Wiki space, will link to a
            single workspace.

            The workspace has members which are allowed to access the entities
            that are part of the workspace.  A workspace owner decides which user
            is part of the workspace or not.
        </comment>
        <id name="id" type="ADO.Identifier" unsaved-value="0">
            <comment>the workspace identifier.</comment>
            <column name="id" not-null="true" unique="false" sql-type="INTEGER"/>
            <generator class="sequence"/>
        </id>
        <version name="version" type="int" column="version">
            <comment>the storage data version.</comment>
        </version>
        <property name="create_date" type="Time" update="false">
            <comment>the workspace creation date.</comment>
            <column name="create_date" not-null="true" unique="false" sql-type="DATETIME"/>
        </property>
        <many-to-one name="owner" class="AWA.Users.Models.User" foreign-key="id" not-null="true" lazy="proxy" fetch="select">
            <comment>the workspace owner.</comment>
            <column name="owner_fk" not-null="true" sql-type="BIGINT"/>
        </many-to-one>
    </class>
    <class name="AWA.Workspaces.Models.Member" table="workspace_member"
           dynamic-insert="true" dynamic-update="true">
        <comment>
            The workspace member indicates the users who are part of the workspace.
        </comment>
        <id name="id" type="ADO.Identifier" unsaved-value="0">
            <comment>the member identifier.</comment>
            <column name="id" not-null="true" unique="false" sql-type="BIGINT"/>
            <generator class="sequence"/>
        </id>
        <version name="version" type="int" column="version">
            <comment>the workspace member version.</comment>
        </version>
        <property name="create_date" type="Time" update="false">
            <comment>the member creation date.</comment>
            <column name="create_date" not-null="true" unique="false" sql-type="DATETIME"/>
        </property>
        <many-to-one name="member" class="AWA.Users.Models.User" foreign-key="id" not-null="true" lazy="proxy" fetch="select">
            <comment>the workspace member.</comment>
            <column name="user_fk" not-null="true" sql-type="BIGINT"/>
        </many-to-one>
        <many-to-one name="workspace" class="Workspace" foreign-key="id" not-null="true" lazy="proxy" fetch="select">
            <comment>the workspace.</comment>
            <column name="workspace_fk" not-null="true" sql-type="INTEGER"/>
        </many-to-one>
    </class>
</hibernate-mapping>
