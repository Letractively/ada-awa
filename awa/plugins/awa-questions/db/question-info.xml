<query-mapping package='AWA.Questions.Models'>
    <description>
      Detailed information about a question.
    </description>

    <class name="AWA.Questions.Models.Question_Display_Info" bean="yes">
        <comment>The list of questions.</comment>
        <property type='Identifier' name="id">
            <comment>the question identifier.</comment>
        </property>
        <property type='String' name="title">
            <comment>the question title.</comment>
        </property>
        <property type='Date' name="create_date">
            <comment>the question creation date.</comment>
        </property>
        <property type='Date' name="edit_date">
            <comment>the question edit date.</comment>
        </property>
        <property type='String' name="description">
            <comment>the question description.</comment>
        </property>
        <property type='String' name="rating">
            <comment>the question rating.</comment>
        </property>
        <property type='Identifier' name="author_id">
            <comment>the author's identifier.</comment>
        </property>
        <property type='String' name="author_name">
            <comment>the author's name.</comment>
        </property>
        <property type='String' name="author_email">
            <comment>the author's email.</comment>
        </property>
    </class>

    <query name='question-info'>
       <comment>Get the detailed information for a question.</comment>
       <sql>
    SELECT
      q.id,
      q.title,
      q.create_date,
      q.edit_date,
      q.description,
      q.rating,
      q.author_id,
      user.name,
      email.email
    FROM awa_question AS q
    INNER JOIN awa_user AS user ON q.author_id = user.id
    INNER JOIN awa_email AS email ON q.author_id = email.user_id
    WHERE q.id = :question_id
       </sql>
    </query>

</query-mapping>
