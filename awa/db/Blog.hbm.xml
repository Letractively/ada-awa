<?xml version="1.0" encoding="UTF-8"?>
<hibernate-mapping default-cascade="none">
    <enum name="AWA.Blogs.Models.Post_Status_Type">
       <comment>The post status</comment>
       <value name="POST_DRAFT" value="0"/>
       <value name="POST_PUBLISHED" value="1"/>
       <value name="POST_SCHEDULED" value="2"/>
    </enum>
    <class name="AWA.Blogs.Models.Blog" table="blog"
           dynamic-insert="true" dynamic-update="true">
        <comment>Blog </comment>
        <id name="id" type="ADO.Identifier" unsaved-value="0">
            <comment>the blog identifier</comment>
            <column name="id" not-null="true" unique="false" sql-type="INTEGER"/>
            <generator class="sequence"/>
        </id>
        <version name="version" type="int" column="version">
            <comment>the blob version.</comment>
        </version>
        <property name="name" type="String">
            <comment>the blog name</comment>
            <column name="name" not-null="true" unique="false" sql-type="VARCHAR(256)"/>
        </property>
        <property name="uid" type="String">
            <comment>the blog uuid</comment>
            <column name="uid" not-null="true" unique="false" sql-type="VARCHAR(256)"/>
        </property>
        <property name="create_date">
            <comment>the blog creation date</comment>
            <column name="create_date" not-null="true" unique="false" sql-type="DATETIME"/>
            <type name="Time"/>
        </property>
        <many-to-one name="workspace" class="AWA.Workspaces.Models.Workspace" foreign-key="id" not-null="true" lazy="proxy" fetch="select">
            <comment>the workspace that this blob belongs to.</comment>
            <column name="workspace_id" not-null="true" sql-type="INTEGER"/>
        </many-to-one>
    </class>
    <class name="AWA.Blogs.Models.Post" table="blog_post"
           dynamic-insert="true" dynamic-update="true">
        <comment>Post in a blog</comment>
        <id name="id" type="ADO.Identifier" unsaved-value="0">
            <comment>the post identifier</comment>
            <column name="id" not-null="true" unique="false" sql-type="BIGINT"/>
            <generator class="sequence"/>
        </id>
        <version name="version" type="int" column="version">
            <comment>the post version.</comment>
        </version>
        <property name="title" type="String">
            <comment>the post title</comment>
            <column name="title" not-null="true" unique="false" sql-type="VARCHAR(256)"/>
        </property>
        <property name="uri" type="String">
            <comment>the uri</comment>
            <column name="uri" not-null="false" unique="false" sql-type="VARCHAR(256)"/>
        </property>
        <property name="text" type="String">
            <comment>the blog text content</comment>
            <column name="text" not-null="false" unique="false" sql-type="VARCHAR(60000)"/>
        </property>
        <property name="create_date">
            <comment>the post creation date</comment>
            <column name="create_date" not-null="true" unique="false" sql-type="DATETIME"/>
            <type name="Time"/>
        </property>
        <property name="publish_date">
            <comment>the post publication date</comment>
            <column name="publish_date" not-null="false" unique="false" sql-type="DATETIME"/>
            <type name="Nullable_Time"/>
        </property>
        <property name="status">
            <comment>the post status</comment>
            <column name="status" not-null="true" unique="false" sql-type="INTEGER"/>
            <type name="AWA.Blogs.Models.Post_Status_Type"/>
        </property>
        <many-to-one name="author" class="AWA.Users.Models.User" foreign-key="ID" not-null="true" lazy="proxy" fetch="select">
            <comment>the post author</comment>
            <column name="author_id" not-null="true" sql-type="INTEGER"/>
        </many-to-one>
        <many-to-one name="blog" class="Blog" foreign-key="ID" not-null="true" lazy="proxy" fetch="select">
            <comment>the blog that this post belongs</comment>
            <column name="blog_id" not-null="true" sql-type="INTEGER"/>
        </many-to-one>
    </class>

</hibernate-mapping>
